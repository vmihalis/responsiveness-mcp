# Milestone v2.1: Enhanced Report

**Status:** SHIPPED 2026-01-21
**Phases:** 17-18
**Total Plans:** 2

## Overview

Make the HTML report more useful by showing the viewport boundary and enabling interactive testing at any device size.

**Target features:**
- Fold line indicator showing where viewport ends on each screenshot
- Interactive preview modal to test site at device dimensions

## Phases

### Phase 17: Fold Line Indicator

**Goal**: Users can see viewport boundaries on all screenshots
**Depends on**: Phase 16 (v2.0 complete)
**Requirements**: FOLD-01, FOLD-02, FOLD-03, FOLD-04, FOLD-05
**Success Criteria** (what must be TRUE):
  1. User sees horizontal line at viewport height on thumbnail screenshots
  2. User sees horizontal line at viewport height in enlarged lightbox view
  3. Fold line uses non-intrusive styling that doesn't obscure content
  4. Fold line position adjusts correctly when window is resized
  5. Fold line remains CSS-based (not baked into screenshot image)
**Plans**: 1 plan

Plans:
- [x] 17-01-PLAN.md — Implement fold line indicator (PNG dimension extraction, fold calculation, CSS styles, HTML rendering)

**Details:**
- PNG dimension extraction from buffer header (no external dependencies)
- CSS ::after pseudo-elements for fold line overlay
- Semi-transparent coral dashed line (rgba(255, 100, 100, 0.5), 2px)
- Thumbnail fold position null when fold below visible cropped area
- CSS custom property injection via inline style for dynamic positioning

### Phase 18: Interactive Preview Modal

**Goal**: Users can test the live site at any device dimensions
**Depends on**: Phase 17
**Requirements**: PREV-01, PREV-02, PREV-03, PREV-04, PREV-05, PREV-06, PREV-07
**Success Criteria** (what must be TRUE):
  1. User can click any screenshot to open interactive preview
  2. Preview modal displays iframe sized to exact device dimensions
  3. User sees loading spinner while iframe loads
  4. User can close modal via close button, ESC key, or backdrop click
  5. User sees helpful error message when site blocks iframe (CORS/X-Frame-Options)
  6. Error state includes "Open in new tab" fallback link
  7. Modal uses proper iframe sandboxing for security
**Plans**: 1 plan

Plans:
- [x] 18-01-PLAN.md — Add interactive preview modal (native dialog, iframe preview, loading/error states, keyboard accessibility)

**Details:**
- Native HTML5 dialog with showModal() for built-in accessibility
- Iframe preview sized to exact device viewport dimensions
- Loading spinner while iframe loads
- Error state with "Open in New Tab" fallback for blocked iframes
- 10-second iframe timeout for detecting X-Frame-Options blocking
- Separate preview button from lightbox (preserve both features)
- Focus restoration on modal close

---

## Milestone Summary

**Key Decisions:**
- PNG dimension extraction via buffer header (no external dependencies)
- CSS ::after pseudo-elements for fold line overlay
- Semi-transparent coral dashed line for good contrast
- Native dialog element over custom modal for built-in accessibility
- 10-second iframe timeout for detecting blocked embedding
- Separate preview button from lightbox (preserve both features)

**Issues Resolved:**
- None — both phases executed as planned

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

*For current project status, see .planning/ROADMAP.md*
*Archived: 2026-01-21 as part of v2.1 milestone completion*

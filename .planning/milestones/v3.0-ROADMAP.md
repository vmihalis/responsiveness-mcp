# Milestone v3.0: Viewport-First Capture

**Status:** ✅ SHIPPED 2026-01-22
**Phases:** 21-23
**Total Plans:** 5

## Overview

Transform default capture behavior from full-page to viewport-only screenshots, making the grid view scannable at a glance while preserving full-page capture via `--full-page` flag. Remove now-redundant fold line indicators and update documentation for the breaking change.

## Phases

### Phase 21: Capture Engine Changes

**Goal**: Default screenshot capture is viewport-only; full-page capture available via flag.

**Depends on**: Phase 20 (v2.2 ASCII Banner Terminal Width)
**Requirements**: CAP-01, CAP-02, CAP-03

**Success Criteria** (what must be TRUE):
1. Running `screenie <url>` captures viewport-height screenshots (not full page)
2. Running `screenie <url> --full-page` captures full-page screenshots (original v2.2 behavior)
3. All existing flags (--phones-only, --tablets-only, --desktops-only, --concurrency, --wait, --pages) work unchanged
4. Screenshot dimensions match device viewport height (not page content height)
5. All existing tests pass or are updated for new default behavior

**Plans:** 2 plans

Plans:
- [x] 21-01-PLAN.md — Add types and CLI flag for fullPage option
- [x] 21-02-PLAN.md — Implement viewport-only default with fullPage support

**Details:**
- Added fullPage property to CaptureOptions and CLIOptions interfaces
- Added --full-page CLI flag to Commander program definition
- Changed default from fullPage: true to fullPage: false in capture engine
- Threaded fullPage option through CLI → actions → executor → capturer

---

### Phase 22: Report Cleanup

**Goal**: Remove fold line indicator from HTML report (redundant with viewport-only capture).

**Depends on**: Phase 21
**Requirements**: RPT-01, RPT-02, RPT-03

**Success Criteria** (what must be TRUE):
1. Thumbnail cards in report grid show no fold line overlay
2. Lightbox view shows no fold line overlay
3. Fold line CSS and JavaScript code removed from report generation
4. Report file size reduced (no fold line positioning data)

**Plans:** 1 plan

Plans:
- [x] 22-01-PLAN.md — Remove fold line code from reporter, types, and tests

**Details:**
- Removed THUMBNAIL_ASPECT_RATIO constant, getPngDimensions, and calculateFoldPositions functions
- Removed fold line CSS (.thumbnail-link::after, .lightbox-content::after)
- Simplified ScreenshotForReport interface from 9 fields to 5 fields
- Simplified renderThumbnailCard and renderLightbox functions
- Removed ~130 lines of fold-related code
- Removed ~219 lines of fold-related tests

---

### Phase 23: Documentation & Release

**Goal**: Document breaking change and release v3.0.0.

**Depends on**: Phase 22
**Requirements**: DOC-01, DOC-02, DOC-03, DOC-04, VER-01, VER-02

**Success Criteria** (what must be TRUE):
1. CLI reference documents viewport-only as default behavior
2. CLI reference documents `--full-page` flag with clear usage examples
3. README reflects viewport-only screenshots as the default
4. CHANGELOG clearly marks v3.0.0 as breaking change with migration notes
5. Running `screenie --version` shows "3.0.0" in ASCII banner
6. package.json version is "3.0.0"

**Plans:** 2 plans

Plans:
- [x] 23-01-PLAN.md — Update documentation with --full-page flag and viewport-only default
- [x] 23-02-PLAN.md — Create CHANGELOG and bump version to 3.0.0

**Details:**
- Updated CLI reference, README, Getting Started, and Examples documentation
- Created CHANGELOG.md with Keep a Changelog 1.0.0 format
- Documented breaking change with explicit migration instructions
- Bumped version to 3.0.0 in package.json and package-lock.json

---

## Milestone Summary

**Key Decisions:**
- fullPage defaults to false (viewport-only) — users opt-in to full-page capture
- CLI flag named --full-page for consistency with existing kebab-case flags
- Optional boolean pattern: flag presence = true, absence = undefined
- Nullish coalescing pattern for fullPage option (options.fullPage ?? false)
- Remove fold line entirely — viewport-only capture = entire screenshot IS "above the fold"
- Keep a Changelog 1.0.0 format for version history

**Issues Resolved:**
- Long page screenshots becoming unwieldy (10,000px+ images)
- Grid view becoming unscannable with variable-height screenshots
- Fold line redundancy with viewport-only capture

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/PROJECT.md_

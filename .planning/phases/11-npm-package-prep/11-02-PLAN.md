---
phase: 11-npm-package-prep
plan: 02
type: execute
wave: 1
depends_on: ["11-01"]
files_modified:
  - src/cli/commands.ts
  - src/cli/__tests__/commands.test.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "CLI help shows 'screenie' as command name in Usage line"
    - "CLI examples show 'screenie' command, not 'responsive-capture'"
    - "Tests pass with updated expectations"
  artifacts:
    - path: "src/cli/commands.ts"
      provides: "CLI definition with screenie branding"
      contains: ".name('screenie')"
    - path: "src/cli/__tests__/commands.test.ts"
      provides: "Tests expecting screenie as program name"
      contains: "expect(program.name()).toBe('screenie')"
    - path: "dist/cli.js"
      provides: "Rebuilt CLI with correct branding"
  key_links:
    - from: "src/cli/commands.ts"
      to: "screenie --help output"
      via: "commander .name() method"
      pattern: "\\.name\\('screenie'\\)"
---

<objective>
Fix CLI branding mismatch: update program name and examples from 'responsive-capture' to 'screenie'.

Purpose: Close verification gap - users should see 'screenie' in help output since that's the command they run.
Output: Consistent branding in CLI help, examples, and tests.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-npm-package-prep/11-VERIFICATION.md

@src/cli/commands.ts
@src/cli/__tests__/commands.test.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update CLI branding in commands.ts</name>
  <files>src/cli/commands.ts</files>
  <action>
Update src/cli/commands.ts to use 'screenie' branding:

1. Line 9: Change `.name('responsive-capture')` to `.name('screenie')`

2. Lines 50-55: Update all example commands from 'responsive-capture' to 'screenie':
   ```
   Examples:
     $ screenie http://localhost:3000
     $ screenie http://localhost:3000 /about
     $ screenie https://example.com --pages /home /about /contact
     $ screenie http://localhost:3000 --phones-only --concurrency 5
     $ screenie http://localhost:3000 --wait 1000 --output ./my-screenshots
     $ screenie http://localhost:3000 --no-open  # CI mode, don't open browser
   ```

Keep all other code unchanged - only modify the name and examples text.
  </action>
  <verify>
Run: `grep -n "screenie" src/cli/commands.ts | head -10`
Expected: Shows line 9 with .name('screenie') and lines 50-55 with $ screenie examples

Run: `grep "responsive-capture" src/cli/commands.ts`
Expected: No output (all instances replaced)
  </verify>
  <done>
- .name('screenie') on line 9
- All 6 example commands use 'screenie' prefix
- No 'responsive-capture' strings remain in file
  </done>
</task>

<task type="auto">
  <name>Task 2: Update test expectations</name>
  <files>src/cli/__tests__/commands.test.ts</files>
  <action>
Update src/cli/__tests__/commands.test.ts to expect 'screenie' as program name:

Line 150-151: Change the test expectation:
```typescript
it('has screenie as program name', () => {
  expect(program.name()).toBe('screenie');
});
```

Note: The test description and expectation both need to change from 'responsive-capture' to 'screenie'.
  </action>
  <verify>
Run: `grep -A1 "program name" src/cli/__tests__/commands.test.ts`
Expected: Shows "has screenie as program name" and "toBe('screenie')"

Run: `grep "responsive-capture" src/cli/__tests__/commands.test.ts`
Expected: No output (old name removed from tests)
  </verify>
  <done>
- Test description says "has screenie as program name"
- Test expects program.name() to be 'screenie'
- No 'responsive-capture' strings in test file
  </done>
</task>

<task type="auto">
  <name>Task 3: Rebuild and verify fix</name>
  <files></files>
  <action>
Rebuild the CLI and verify the branding is correct:

1. Run build:
   ```bash
   npm run build
   ```

2. Run tests to confirm expectations pass:
   ```bash
   npm test
   ```

3. Verify help output shows correct branding:
   ```bash
   npm link
   screenie --help
   npm unlink -g screenie
   ```

4. Confirm help output shows:
   - "Usage: screenie [options] <url> [path]"
   - Examples all use "$ screenie ..."
  </action>
  <verify>
Run: `npm run build && npm test`
Expected: Build succeeds, all tests pass

Run: `node dist/cli.js --help 2>&1 | head -3`
Expected: Shows "Usage: screenie [options] <url> [path]"

Run: `node dist/cli.js --help 2>&1 | grep "^\s*\$ "`
Expected: Shows 6 example lines all starting with "$ screenie"
  </verify>
  <done>
- Build completes without errors
- All tests pass (including updated program name test)
- screenie --help shows "Usage: screenie" not "Usage: responsive-capture"
- All example commands show "$ screenie" prefix
  </done>
</task>

</tasks>

<verification>
After all tasks complete, verify gap is closed:

1. **Program name correct:**
   ```bash
   node dist/cli.js --help 2>&1 | grep "^Usage:"
   # Expected: Usage: screenie [options] <url> [path]
   ```

2. **Examples correct:**
   ```bash
   node dist/cli.js --help 2>&1 | grep -c "screenie"
   # Expected: 7+ (usage line + 6 examples)
   ```

3. **No old branding:**
   ```bash
   grep "responsive-capture" src/cli/commands.ts src/cli/__tests__/commands.test.ts
   # Expected: No output
   ```

4. **Tests pass:**
   ```bash
   npm test -- --reporter=dot 2>&1 | tail -3
   # Expected: All tests pass
   ```
</verification>

<success_criteria>
- [ ] src/cli/commands.ts uses .name('screenie')
- [ ] All 6 examples in commands.ts use 'screenie' prefix
- [ ] Test expects program.name() to be 'screenie'
- [ ] npm run build succeeds
- [ ] npm test passes (all tests green)
- [ ] screenie --help shows "Usage: screenie"
</success_criteria>

<output>
After completion, create `.planning/phases/11-npm-package-prep/11-02-SUMMARY.md`
</output>

---
phase: 15-documentation
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - netlify.toml
autonomous: false

must_haves:
  truths:
    - "docs.screenie.xyz resolves and serves documentation"
    - "Site deploys automatically on git push"
    - "All documentation pages accessible via URL"
  artifacts:
    - path: "netlify.toml"
      provides: "Netlify build configuration for docs"
      contains: "docs/.vitepress/dist"
  key_links:
    - from: "netlify.toml"
      to: "Netlify deployment"
      via: "build command and publish directory"
      pattern: "vitepress build docs"
---

<objective>
Deploy VitePress documentation site to Netlify at docs.screenie.xyz.

Purpose: Make documentation publicly accessible for developers
Output: Live documentation site at docs.screenie.xyz
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/15-documentation/15-RESEARCH.md
@.planning/phases/15-documentation/15-01-SUMMARY.md
@netlify.toml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update netlify.toml for docs deployment</name>
  <files>
    - netlify.toml
  </files>
  <action>
Replace netlify.toml content for VitePress docs deployment:

```toml
[build]
  publish = "docs/.vitepress/dist"
  command = "npm run docs:build"

[build.environment]
  NODE_VERSION = "20"

# Redirect www to apex
[[redirects]]
  from = "https://www.docs.screenie.xyz/*"
  to = "https://docs.screenie.xyz/:splat"
  status = 301
  force = true

# Security headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

# Cache static assets (VitePress hashes filenames)
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
```

Note: This replaces the previous landing page config since landing is now on Vercel.
The docs site becomes the primary Netlify deployment for this repo.
  </action>
  <verify>
    Run `npm run docs:build` - confirms build command works
    File netlify.toml updated with correct publish directory
  </verify>
  <done>
    netlify.toml configured for VitePress docs deployment
  </done>
</task>

<task type="auto">
  <name>Task 2: Deploy to Netlify</name>
  <files></files>
  <action>
1. Commit and push changes:
   ```bash
   git add .
   git commit -m "docs(15): add VitePress documentation site"
   git push
   ```

2. Deploy to Netlify using CLI:
   ```bash
   npx netlify-cli deploy --prod --dir=docs/.vitepress/dist
   ```

   If not logged in, this will prompt for authentication.
   If no site linked, run `npx netlify-cli link` first or `npx netlify-cli init`.

3. After deployment, note the site URL (*.netlify.app)
  </action>
  <verify>
    Site accessible at Netlify URL (*.netlify.app)
    All documentation pages load correctly
  </verify>
  <done>
    Documentation deployed to Netlify, accessible via *.netlify.app URL
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>VitePress documentation site deployed to Netlify</what-built>
  <how-to-verify>
1. Visit the Netlify deployment URL (provided after deploy)
2. Verify home page loads with hero section
3. Click "Get Started" - getting-started page loads
4. Navigate to CLI Reference - all 10 options documented
5. Navigate to Examples - usage examples display
6. Test search: type "phones" - should find --phones-only
7. (Optional) Configure custom domain docs.screenie.xyz in Netlify dashboard:
   - Site settings -> Domain management -> Add custom domain
   - Add DNS CNAME record: docs -> [netlify-site].netlify.app
   - Wait for SSL certificate provisioning
  </how-to-verify>
  <resume-signal>Type "verified" to confirm docs site is working, or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. netlify.toml has correct build config
2. Site deploys successfully to Netlify
3. Home page accessible at deployment URL
4. All navigation links work
5. Search finds content
6. (Future) docs.screenie.xyz resolves after DNS setup
</verification>

<success_criteria>
- Documentation live on Netlify (*.netlify.app URL)
- All 4 pages render correctly
- Local search functional
- Auto-deploy configured via git push
</success_criteria>

<output>
After completion, create `.planning/phases/15-documentation/15-02-SUMMARY.md`
</output>
